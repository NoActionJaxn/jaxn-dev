---
import classNames from "classnames";
import { gql } from "graphql-request";
import MenuButton from "../react/components/MenuButton";
import ThemeToggleButton from "../react/components/ThemeToggleButton";
import PageLogo from "../react/components/PageLogo";
import { SPACING, COLORS } from "../constants/classes";
import { client } from "../lib/graphql";
import SocialNetworks from "../react/components/SocialNetworks";
import type { SocialNetworkResponse } from "../types/socialNetworks";

const gqlResponse: SocialNetworkResponse = await client.request(gql`
  query fetchNetworks {
    allSocialNetworks {
      edges {
        node {
          id
          fontAwesomeIcon
          connectionUrl
        }
      }
    }
  }
`);

const socialNetworks = gqlResponse.allSocialNetworks.edges;
---

<header
  class={classNames(
    "sticky top-0 z-20",
    SPACING.PAGE.PADDING.X,
    SPACING.PAGE.PADDING.Y
  )}
>
  <div
    class={classNames(
      "flex flex-row items-center p-2 rounded-lg shadow",
      COLORS.HEADER.BACKGROUND
    )}
  >
    <div class="flex-1/3 flex gap-1">
      <MenuButton client:only="react" />
    </div>
    <div class="flex-1/3 flex justify-center">
      <PageLogo className="text-xs" client:only="react" />
    </div>
    <div class="flex-1/3 flex justify-end items-center gap-1">
      <SocialNetworks socialNetworks={socialNetworks} client:only="react" />
      <div class="h-6 w-[1px] mx-0.5 bg-gruvbox-bg2 dark:bg-gruvbox-dark-bg2">
      </div>
      <ThemeToggleButton client:only="react" />
    </div>
  </div>
</header>
